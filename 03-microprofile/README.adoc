= MicroProfile

== 01 What is MicroProfile?

https://microprofile.io/

== 02 JAX-RS and CDI recap

https://github.com/xstefank/pv217-microservices/tree/master/02-quarkus#abbreviations-explanations

https://quarkus.io/guides/rest-json#whats-different-from-jakarta-ee-development

== 03 JSON-B

https://quarkus.io/guides/rest-json

* Tutorial - https://www.baeldung.com/java-json-binding-api
** in Quarkus you don't need anything else then quarkus-jsonb extension
* Specification - https://github.com/eclipse-ee4j/jsonb-api
* http://json-b.net/

== 04 JSON-P

* Tutorial - https://www.baeldung.com/jee7-json
* Specification - https://github.com/eclipse-ee4j/jsonp
* https://eclipse-ee4j.github.io/jsonp/


== 03 MicroProfile Config

Quarkus guide - https://quarkus.io/guides/config
Spec - https://github.com/eclipse/microprofile-config
Spec doc - https://github.com/eclipse/microprofile-config/blob/master/spec/src/main/asciidoc/microprofile-config-spec.asciidoc

== 04 MicroProfile Health

Quarkus guide - https://quarkus.io/guides/microprofile-health
Spec - https://github.com/eclipse/microprofile-health
Spec doc - https://github.com/eclipse/microprofile-health/blob/master/spec/src/main/asciidoc/microprofile-health-spec.adoc

== 05 MicroProfile Metrics

Quarkus guide - https://quarkus.io/guides/microprofile-metrics
Spec - https://github.com/eclipse/microprofile-metrics
Spec doc - https://github.com/eclipse/microprofile-metrics/blob/master/spec/src/main/asciidoc/metrics_spec.adoc
More detailed metrics quickstart - https://github.com/wildfly/quickstart/tree/master/microprofile-metrics

Prometheus

[source,bash]
----
docker run --rm --name prometheus -p 9090:9090 --network host \
-v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml:Z prom/prometheus:v2.14.0 \
--config.file=/etc/prometheus/prometheus.yml
----

Grafana

[source,bash]
----
docker run --rm -p 3000:3000 --network host grafana/grafana:6.4.4
----

== 06 MicroProfile OpenAPI

Quarkus guide - https://quarkus.io/guides/openapi-swaggerui
Spec - https://github.com/eclipse/microprofile-open-api
Spec doc - https://github.com/eclipse/microprofile-open-api/blob/master/spec/src/main/asciidoc/microprofile-openapi-spec.adoc

== 07 JAX-RS REST client

Tutorial - https://docs.jboss.org/resteasy/docs/3.0-beta-3/userguide/html/RESTEasy_Client_Framework.html

== 08 MP REST client

Quarkus guide - https://quarkus.io/guides/rest-client
Spec - https://github.com/eclipse/microprofile-rest-client
Spec doc - https://github.com/eclipse/microprofile-rest-client/blob/master/spec/src/main/asciidoc/microprofile-rest-client.asciidoc

== TBD Communication between services

1. Copy getting-started to getting-started-2
2. Add new endpoint

[source,java]
----
@GET
@Path("/call")
public void getHelloFromService2() {
    Client client = ClientBuilder.newClient();

    try {
        Response response = client.target("http://localhost:8081/hello")
            .request()
            .get();

        System.out.printf("Status: %d%nHeaders: %s%nBody: %s%n",
            response.getStatus(), response.getHeaders(), response.readEntity(String.class));
    } finally {
        client.close();
    }
}
----


